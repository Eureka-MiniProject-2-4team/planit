<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Team API 테스트</title>
</head>
<body>
<h2>Team API 테스트</h2>

<!-- POST: 팀 생성 -->
<a href="#" onclick="registerTeam()">팀 생성</a><br>

<!-- POST: 팀원 초대 -->
<a href="#" onclick="inviteMember()">팀원 초대</a><br>

<!-- GET: 팀 상세 조회 -->
<a href="#" onclick="getTeam()">팀 상세 조회</a><br>

<!--&lt;!&ndash; GET: 팀원 상세 조회 &ndash;&gt;-->
<!--<a href="#" onclick="getTeamMember('team123', 'user456')">팀원 상세 조회</a><br>-->

<!--&lt;!&ndash; GET: 팀원 전체 조회 &ndash;&gt;-->
<!--<a href="#" onclick="getTeamMemberList('team123')">팀원 전체 조회</a><br>-->

<!-- GET: 나의 팀 리스트 조회 -->
<a href="#" onclick="getMyTeamList()">나의 팀 리스트 조회</a><br>

<a href="#" onclick="getMyInvitedList()">나의 초대받은 리스트 조회</a><br>

<!-- PUT: 팀 정보 수정 -->
<a href="#" onclick="updateTeam()">팀 정보 수정</a><br>

<!-- PUT: 팀 가입 수락 -->
<a href="#" onclick="acceptTeamJoin()">팀 가입 수락</a><br>

<!-- DELETE: 팀 삭제 -->
<a href="#" onclick="deleteTeam()">팀 삭제</a><br>

<!-- DELETE: 팀원 강퇴 -->
<a href="#" onclick="deleteMember()">팀원 강퇴</a><br>

<!-- DELETE: 팀 가입 거절 및 탈퇴 -->
<a href="#" onclick="denyTeamJoin()">팀 가입 거절/탈퇴</a><br>

<script>
    // 하드코딩 테스트
    teamId = "aceacd14-9151-4f60-905b-266cf746f8d7";
    userId = "9efd5129-5c4b-4119-a5fb-cb6411592b48"; // 타인 : 행위 대상 ( 본인 userId 아님 )

    function registerTeam() {
        fetch('/api/team', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': localStorage.getItem('accessToken')
            },
            body: JSON.stringify({
                teamName: "테스트 팀3",
                description: "설명입니다"
            })
        }).then(res => res.json()).then(console.log);
    }

    function inviteMember() {
        fetch(`/api/team/${teamId}/member/${userId}`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': localStorage.getItem('accessToken')
            },
            body: JSON.stringify({
                userId: userId,  // 예시 필드
                teamId: teamId
            })
        }).then(res => res.json()).then(console.log);
    }

    function getTeam() {
        fetch(`/api/team/${teamId}`, {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': localStorage.getItem('accessToken')
                }
            }
        )
            .then(res => res.json()).then(console.log);
    }

    function getTeamMember() {
        fetch(`/api/team/${teamId}/member/${userId}`, {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': localStorage.getItem('accessToken')
                }
            }
        )
            .then(res => res.json()).then(console.log);
    }

    function getTeamMemberList() {
        fetch(`/api/team/${teamId}/member/list`, {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': localStorage.getItem('accessToken')
                }
            }
        )
            .then(res => res.json()).then(console.log);
    }

    function getMyTeamList() {
        console.log('accessToken (raw):', localStorage.getItem('accessToken'));
        fetch('/api/team/myteamlist', {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': localStorage.getItem('accessToken')
            }
        }).then(res => res.json()).then(console.log);
    }

    function getMyInvitedList() {
        console.log('accessToken (raw):', localStorage.getItem('accessToken'));
        fetch('/api/team/invitelist', {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': localStorage.getItem('accessToken')
            }
        }).then(res => res.json()).then(console.log);
    }

    function updateTeam() {
        fetch(`/api/team/${teamId}`, {
            method: 'PUT',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': localStorage.getItem('accessToken')
            },
            body: JSON.stringify({
                id: teamId,
                teamName: "수정된 이름",
                description: "수정된 설명"
            })
        }).then(res => res.json()).then(console.log);
    }

    function acceptTeamJoin() {
        fetch(`/api/team/${teamId}/member`, {
            method: 'PUT',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': localStorage.getItem('accessToken')
            }
        }).then(res => res.json()).then(console.log);
    }

    function deleteTeam() {
        fetch(`/api/team/${teamId}`, {
            method: 'DELETE',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': localStorage.getItem('accessToken')
            }
        }).then(res => res.json()).then(console.log);
    }

    function deleteMember() {
        fetch(`/api/team/${teamId}/member/${userId}`, {
            method: 'DELETE',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': localStorage.getItem('accessToken')
            }
        }).then(res => res.json()).then(console.log);
    }

    function denyTeamJoin() {
        fetch(`/api/team/${teamId}/member`, {
            method: 'DELETE',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': localStorage.getItem('accessToken')
            }
        }).then(res => res.json()).then(console.log);
    }
</script>
</body>
</html>

